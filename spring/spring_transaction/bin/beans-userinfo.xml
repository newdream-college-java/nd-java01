<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/tx
        https://www.springframework.org/schema/tx/spring-tx.xsd
         http://www.springframework.org/schema/aop
        https://www.springframework.org/schema/aop/spring-aop.xsd
        ">
	<!-- 1.扫描注解 -->
	<context:component-scan base-package="com.cc.**"/>
	<!-- 2.加入mybatis -->
	<import resource="beans-datasoource.xml"/>
	<!-- 3.加入spring的事务管理器 -->
	<!-- 事务管理器:不同orm框架 事务管理器 不同 （黑白刷）-->
	<bean  id="txTransaction" class="org.springframework.jdbc.datasource.DataSourceTransactionManager  ">
	        <property name="dataSource" ref="dataSource"/>
	</bean>
	<!-- 4.spring声明式事务：将黑白刷插入到付自强的屁眼 -->
	<!-- 1.切面 -->
	<tx:advice id="ndAdvice"  transaction-manager="txTransaction">
	        <tx:attributes>
	            <!-- 哪个方法需要使用什么事务：哪个屁眼需要插入黑板刷
	            zz*:所有以zz开始的方法名的所有方法
	            *zz: 所有以zz结束的方法名的所有方法
	            -->
	            <tx:method name="zz*" />
	            <!-- *  其他方法使用默认事务   事务是只读的，就表名事务内不能对数据进行更新。-->
	            <tx:method name="*"  read-only="true"/>
        </tx:attributes>
	</tx:advice>
	<!--2. aop 配置-->
	<aop:config>
	   <!-- 指定谁的屁眼 
	       *:返回值类型为任意类型 
	       com.cc.service.impl.UserInfoServiceImpl：哪个包的哪个类
	       .*(..))：*  任意方法  （..)任意参数
	   -->
	    <aop:pointcut id="sdpy" expression="execution(*  com.cc.service.impl.UserInfoServiceImpl2.*(..))"/>
        <aop:advisor advice-ref="ndAdvice" pointcut-ref="sdpy"/>
	</aop:config>
	<!-- 增强：就是上面你的事务管理器 -->
</beans>